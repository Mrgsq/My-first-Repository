"use strict";!function(){$(document).ready(function(){$("#tel").val(""),$("#imgCode").val(""),$("#phoneCode").val("")}),$(".tab_login .tab_login_item").click(function(){$(this).addClass("active").siblings().removeClass("active"),$(".login_main_cont").eq($(this).index()).css("display","block").siblings().css("display","none").parent().find(".tab_login").css("display","block")});var n=["reg1","reg2","reg3","reg4","reg5","reg6","reg7","reg8"],o=["nnwn","n6b4","nm3n","bmn3","6g4y","n4gc","bwm3","n5m6"];$("#regbtn").click(function(){location.href="register.html"}),$("#tel").blur(function(){var n=this,e=$(this).val();e?/^1[3456789]\d{9}$/.test(e)?$.ajax({type:"post",url:"../api/reg.php",data:{name:"checkusername",tel:e},success:function(e){console.log(e),"yes"==e?$(n).next().css({display:"inline-block",color:"green"}).attr("isok",!0).html("手机号码验证通过"):$(n).next().css({display:"inline-block",color:"red"}).attr("isok",!1).html("手机号码未注册")}}):$(this).next().css({display:"inline-block",color:"red"}).attr("isok",!1).html("手机号码不符合"):$(this).next().css({display:"inline-block",color:"red"}).attr("isok",!1)}),$("#tel").bind("input propertychange",function(){$(this).val()&&$(".loginbtn").css("background","#ccc")});$(".imgCode_box").click(function(){var e=parseInt(8*Math.random());$(this).children().attr("src","../img/loginimgs/"+n[e]+".jpg")}),$("#imgCode").blur(function(){var e=$(this).val();e?(console.log(e),e==o[0]&&$(this).parent().parent().next().css({display:"inline-block",color:"green"}).attr("isok",!0).html("验证码通过")):$(this).parent().parent().next().css({display:"inline-block",color:"red"}).attr("isok",!1)});var t=null;$(".phoneCodebtn").click(function(){if($("#tel").val()){var e=60,n=setInterval(function(){--e<1?($(".phoneCodebtn").val("获取验证码"),clearInterval(n),$(".phoneCodebtn").attr("disabled","false")):($(".phoneCodebtn").val(e+"s后重新获取"),$(".phoneCodebtn").attr("disabled","true"))},1e3);$.ajax({type:"post",url:"../api/duanxin.php",data:{userphone:$("#tel").val()},success:function(e){var n=JSON.parse(e);console.log(n),console.log(n.phonecode),t=n.phonecode}})}else $("#tel").next().css({display:"block",color:"red"})}),$("#phoneCode").blur(function(){var e=$(this).val();t?e==t?$("#phoneCode").parent().next().css({display:"inline-block",color:"green"}).attr("isok",!0).html("短信验证码正确"):$("#phoneCode").parent().next().css({display:"inline-block",color:"red"}).attr("isok",!1).html("短信验证码错误"):$("#phoneCode").parent().next().css({display:"inline-block",color:"red"}).attr("isok",!1).html("点击发送验证码")}),$(".loginbtn").click(function(){var o=getCookie("url");$("#tel").val()&&$("#phoneCode").val()&&$("#imgCode").val()?$(".form_item .form_messge").attr("isok")&&$.ajax({type:"get",url:"../api/reg.php",data:{name:"getUsername",tel:$("#tel").val()},dataType:"json",success:function(e){console.log(e);var n=e[0].username;setCookie("username",n,1),location.href=o||"index.html"}}):($("#tel").val()?$("#phoneCode").val()?$("#imgCode").parent().parent().next().css({display:"inline-block",color:"red"}):$("#phoneCode").parent().next().css({display:"inline-block",color:"red"}):$("#tel").next().css({display:"inline-block",color:"red"}),$(this).css("backgroud","#ccc"))})}();